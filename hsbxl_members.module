<?php

use Drupal\hsbxl_members\Entity\Membership;
use Drupal\hsbxl_members\MembershipService;
use Drupal\Core\Datetime\DrupalDateTime;

/**
 * Implements hook_ENTITY_TYPE_presave().
 *
 * @param \Drupal\Core\Entity\EntityInterface $entity
 */
function hsbxl_members_booking_presave(Drupal\Core\Entity\EntityInterface $entity) {
  $membershipService = \Drupal::service('hsbxl_members.membership');

  if ($entity->bundle() == 'sale') {
    $tags = [];

    foreach ($entity->get('field_booking_tags')->referencedEntities() as $tag) {
      $tags[] = $tag->label();
    }

    //$entity->set('name', implode(', ', $tags));
  }
}

/**
 * Cronjob callback.
 */
function hsbxl_members_cronjob_queuemembership() {
  $membership = \Drupal::service('hsbxl_members.membership');
  $membership->queueStatements();
}